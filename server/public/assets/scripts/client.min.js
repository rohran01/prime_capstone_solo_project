var app=angular.module("landingApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/login.html",controller:"LoginController"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterController"}).when("/login",{templateUrl:"views/login.html",controller:"LoginController"}).when("/dailyLogs",{templateUrl:"views/dailyLogs.html",controller:"DailyLogsController"}).when("/goals",{templateUrl:"views/goals.html",controller:"GoalsController"}).when("/myFoods",{templateUrl:"views/myFoods.html",controller:"MyFoodsController"}).when("/stats",{templateUrl:"views/stats.html",controller:"StatsController"}),b.html5Mode(!0)}]),app.controller("MainController",["$scope","UserService",function(a,b){}]),app.controller("RegisterController",["$scope","$http","$location","UserService",function(a,b,c,d){a.newUser={},a.registerUser=function(){b.post("/registerUser",a.newUser).then(function(a){200==a.status&&c.path("login")})}}]),app.controller("LoginController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("what!?",a.userInfo),a.userLogin={},a.loginUser=function(){b.post("/loginUser",a.userLogin).then(function(a){200==a.status?(d.getUserInfo(),c.path("dailyLogs")):c.path("login")})}}]),app.controller("DailyLogsController",["$scope","$http","UserService",function(a,b,c){function d(){c.getUserInfo(),console.log("user object inside data:",a.userInfo),console.log("should be user object:",a.userInfo.data);var b=c.userInfo.data.logs;a.date=a.date.toISOString(),a.date=a.date.substring(0,10),console.log("date nbeing used",a.date);var d=[];a.breakfasts=[],a.lunches=[],a.dinners=[],a.snacks=[],console.log("logs array:",b);for(var e=0;e<b.length;e++){console.log(a.date),console.log(b[e].date);var f=b[e].date;f=f.substring(0,10),console.log(f),f==a.date&&d.push(b[e])}console.log("filled:",d);for(var e=0;e<d.length;e++)"Breakfast"===d[e]?a.breakfasts.push(d[e]):"Lunch"===d[e]?a.lunches.push(d[e]):"Dinner"===d[e]?a.dinners.push(d[e]):"Snacks"===d[e]&&a.snacks.push(d[e]);console.log("breakfasts:",a.breakfasts)}function e(c){var d={date:a.date,food:c,meal:a.meal};b.put("/userInfo/addLog",d).then(function(a){console.log(a)})}a.userInfo=c.userInfo,a.date=new Date,a.displayDate=a.date.toDateString(),a.meal="",a.addWindow=!1,a.searchFoods=[],a.loggedFoods=[],a.breakfasts=[],a.lunches=[],a.dinners=[],a.snacks=[],a.addToMeal=function(b){a.meal=b,a.addWindow=!0},a.searchMyFoods=function(b){a.searchFoods=[];for(var c=a.userInfo.data.myFoods,d=0;d<c.length;d++)c[d].name.toLowerCase()===b.toLowerCase()&&(console.log("match",c[d]),a.searchFoods.push(c[d])),console.log(a.searchFoods)},a.addFood=function(b){for(var c=a.userInfo.data.myFoods,d=0;d<c.length;d++)c[d]._id===b&&e(c[d])},c.getUserInfo(),d()}]),app.controller("GoalsController",["$scope","$http","UserService",function(a,b,c){}]),app.controller("MyFoodsController",["$scope","$http","UserService",function(a,b,c){a.myFood={},a.userInfo=c.userInfo,console.log("user info from myFoods",a.userInfo),a.allMyFoods=a.userInfo.data.myFoods,a.addMyFood=function(){a.error="",console.log(a.myFood);var d={username:a.userInfo.data.username,foodToAdd:a.myFood};b.put("/userInfo/addFood",d).then(function(b){console.log("add food response:",b),"error"==b.data&&(a.error="Could not add that food. Please make sure all blanks are filled in.",console.log(a.error)),c.getUserInfo(a.userInfo.data.username),a.displayMyFoods()})},a.displayMyFoods=function(){a.allMyFoods=a.userInfo.data.myFoods,console.log("allMyFoods",a.allMyFoods),c.getUserInfo()},a.displayMyFoods()}]),app.controller("StatsController",["$scope","$http","UserService",function(a,b,c){}]),app.factory("UserService",["$http",function(a){function b(){console.log("getUserInfo called"),a.get("/userInfo").then(function(a){c.data=a.data,c.data.isLoggedIn=!0})}console.log("is this working");var c={};return{getUserInfo:b,userInfo:c}}]);